(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90],{85078:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(64778),o=r(2403),i=function(){function e(){this._semaphore=new o.default(1)}return e.prototype.acquire=function(){return n.__awaiter(this,void 0,void 0,(function(){var e;return n.__generator(this,(function(t){switch(t.label){case 0:return[4,this._semaphore.acquire()];case 1:return e=t.sent(),[2,e[1]]}}))}))},e.prototype.runExclusive=function(e){return this._semaphore.runExclusive((function(){return e()}))},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.release=function(){this._semaphore.release()},e}();t.default=i},2403:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(64778),o=function(){function e(e){if(this._maxConcurrency=e,this._queue=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}return e.prototype.acquire=function(){var e=this,t=this.isLocked(),r=new Promise((function(t){return e._queue.push(t)}));return t||this._dispatch(),r},e.prototype.runExclusive=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,r,o;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,this.acquire()];case 1:t=n.sent(),r=t[0],o=t[1],n.label=2;case 2:return n.trys.push([2,,4,5]),[4,e(r)];case 3:return[2,n.sent()];case 4:return o(),[7];case 5:return[2]}}))}))},e.prototype.isLocked=function(){return this._value<=0},e.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=void 0,e()}},e.prototype._dispatch=function(){var e=this,t=this._queue.shift();if(t){var r=!1;this._currentReleaser=function(){r||(r=!0,e._value++,e._dispatch())},t([this._value--,this._currentReleaser])}},e}();t.default=o},48125:function(e,t,r){"use strict";t.WU=void 0;var n=r(85078);Object.defineProperty(t,"WU",{enumerable:!0,get:function(){return n.default}});var o=r(2403);var i=r(41960)},41960:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withTimeout=void 0;var n=r(64778);t.withTimeout=function(e,t,r){var o=this;return void 0===r&&(r=new Error("timeout")),{acquire:function(){return new Promise((function(i,s){return n.__awaiter(o,void 0,void 0,(function(){var o,c;return n.__generator(this,(function(n){switch(n.label){case 0:return o=!1,setTimeout((function(){o=!0,s(r)}),t),[4,e.acquire()];case 1:return c=n.sent(),o?(Array.isArray(c)?c[1]:c)():i(c),[2]}}))}))}))},runExclusive:function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,r;return n.__generator(this,(function(n){switch(n.label){case 0:t=function(){},n.label=1;case 1:return n.trys.push([1,,7,8]),[4,this.acquire()];case 2:return r=n.sent(),Array.isArray(r)?(t=r[1],[4,e(r[0])]):[3,4];case 3:return[2,n.sent()];case 4:return t=r,[4,e()];case 5:return[2,n.sent()];case 6:return[3,8];case 7:return t(),[7];case 8:return[2]}}))}))},release:function(){e.release()},isLocked:function(){return e.isLocked()}}}},64778:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return i},__asyncDelegator:function(){return g},__asyncGenerator:function(){return b},__asyncValues:function(){return k},__await:function(){return v},__awaiter:function(){return l},__classPrivateFieldGet:function(){return P},__classPrivateFieldIn:function(){return L},__classPrivateFieldSet:function(){return j},__createBinding:function(){return p},__decorate:function(){return c},__exportStar:function(){return d},__extends:function(){return o},__generator:function(){return f},__importDefault:function(){return E},__importStar:function(){return x},__makeTemplateObject:function(){return R},__metadata:function(){return u},__param:function(){return a},__read:function(){return y},__rest:function(){return s},__spread:function(){return m},__spreadArray:function(){return w},__spreadArrays:function(){return _},__values:function(){return h}});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function c(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function a(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function c(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,c)}a((n=n.apply(e,t||[])).next())}))}function f(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(c){i=[6,c],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var p=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function d(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||p(t,e,r)}function h(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function _(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,c=i.length;s<c;s++,o++)n[o]=i[s];return n}function w(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||c(e,t)}))})}function c(e,t){try{(r=o[e](t)).value instanceof v?Promise.resolve(r.value.v).then(a,u):l(i[0][2],r)}catch(n){l(i[0][3],n)}var r}function a(e){c("next",e)}function u(e){c("throw",e)}function l(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}}function g(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:v(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function k(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=h(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,o,(t=e[r](t)).done,t.value)}))}}}function R(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var B=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&p(t,e,r);return B(t,e),t}function E(e){return e&&e.__esModule?e:{default:e}}function P(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function j(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}function L(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}},55850:function(e,t,r){r(75682),r(12352);const n=r(37253),o=(e,t)=>e+t,i=["sync","latest"];function s(e){return Number.parseInt(e,16)}e.exports=class extends n{constructor(e={}){super(),this._blockResetDuration=e.blockResetDuration||2e4,this._blockResetTimeout,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){if(this._currentBlock)return this._currentBlock;return await new Promise((e=>this.once("latest",e)))}removeAllListeners(e){e?super.removeAllListeners(e):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener()}_start(){}_end(){}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(e,t){i.includes(e)&&this._maybeStart()}_onRemoveListener(e,t){this._getBlockTrackerEventCount()>0||this._maybeEnd()}_maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),this._start())}_maybeEnd(){this._isRunning&&(this._isRunning=!1,this._setupBlockResetTimeout(),this._end())}_getBlockTrackerEventCount(){return i.map((e=>this.listenerCount(e))).reduce(o)}_newPotentialLatest(e){const t=this._currentBlock;t&&s(e)<=s(t)||this._setCurrentBlock(e)}_setCurrentBlock(e){const t=this._currentBlock;this._currentBlock=e,this.emit("latest",e),this.emit("sync",{oldBlock:t,newBlock:e})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}},75012:function(e,t,r){const n=r(12352),o=r(55850);function i(e,t){return new Promise((r=>{const n=setTimeout(r,e);n.unref&&t&&n.unref()}))}e.exports=class extends o{constructor(e={}){if(!e.provider)throw new Error("PollingBlockTracker - no provider specified.");const t=e.pollingInterval||2e4,r=e.retryTimeout||t/10,n=void 0===e.keepEventLoopActive||e.keepEventLoopActive,o=e.setSkipCacheFlag||!1;super(Object.assign({blockResetDuration:t},e)),this._provider=e.provider,this._pollingInterval=t,this._retryTimeout=r,this._keepEventLoopActive=n,this._setSkipCacheFlag=o}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}_start(){this._performSync().catch((e=>this.emit("error",e)))}async _performSync(){for(;this._isRunning;)try{await this._updateLatestBlock(),await i(this._pollingInterval,!this._keepEventLoopActive)}catch(e){const r=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:\n${e.stack}`);try{this.emit("error",r)}catch(t){console.error(r)}await i(this._retryTimeout,!this._keepEventLoopActive)}}async _updateLatestBlock(){const e=await this._fetchLatestBlock();this._newPotentialLatest(e)}async _fetchLatestBlock(){const e={jsonrpc:"2.0",id:1,method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(e.skipCache=!0);const t=await n((t=>this._provider.sendAsync(e,t)))();if(t.error)throw new Error(`PollingBlockTracker - encountered error fetching block:\n${t.error}`);return t.result}}},23256:function(e,t,r){const n=r(76622);e.exports=class extends n{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}}},76622:function(e,t,r){const n=r(19394).default;e.exports=class extends n{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach((e=>this.emit("update",e)))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}}},72785:function(e,t,r){const n=r(76622),o=r(40207),{incrementHexInt:i}=r(98112);e.exports=class extends n{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){const r=t,n=i(e),s=(await o({provider:this.provider,fromBlock:n,toBlock:r})).map((e=>e.hash));this.addResults(s)}}},40207:function(e){function t(e){return void 0===e||null===e?e:Number.parseInt(e,16)}function r(e){if(void 0===e||null===e)return e;return"0x"+e.toString(16)}e.exports=async function({provider:e,fromBlock:n,toBlock:o}){n||(n=o);const i=t(n),s=t(o),c=Array(s-i+1).fill().map(((e,t)=>i+t)).map(r);return await Promise.all(c.map((t=>function(e,t,r){return new Promise(((n,o)=>{e.sendAsync({id:1,jsonrpc:"2.0",method:t,params:r},((e,t)=>{if(e)return o(e);n(t.result)}))}))}(e,"eth_getBlockByNumber",[t,!1]))))}},98112:function(e){function t(e){return e.sort(((e,t)=>"latest"===e||"earliest"===t?1:"latest"===t||"earliest"===e?-1:r(e)-r(t)))}function r(e){return void 0===e||null===e?e:Number.parseInt(e,16)}function n(e){if(void 0===e||null===e)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function o(){return Math.floor(16*Math.random()).toString(16)}e.exports={minBlockRef:function(...e){return t(e)[0]},maxBlockRef:function(...e){const r=t(e);return r[r.length-1]},sortBlockRefs:t,bnToHex:function(e){return"0x"+e.toString(16)},blockRefIsNumber:function(e){return e&&!["earliest","latest","pending"].includes(e)},hexToInt:r,incrementHexInt:function(e){if(void 0===e||null===e)return e;return n(r(e)+1)},intToHex:n,unsafeRandomBytes:function(e){let t="0x";for(let r=0;r<e;r++)t+=o(),t+=o();return t}}},98406:function(e,t,r){const n=r(48125).WU,{createAsyncMiddleware:o}=r(88625),i=r(73541),s=r(81663),c=r(72785),a=r(25792),{intToHex:u,hexToInt:l}=r(98112);function f(e){return p((async(...t)=>{const r=await e(...t);return u(r.id)}))}function p(e){return o((async(t,r)=>{const n=await e.apply(null,t.params);r.result=n}))}function d(e,t){const r=[];for(let n in e)r.push(e[n]);return r}e.exports=function({blockTracker:e,provider:t}){let r=0,o={};const h=new n,y=function({mutex:e}){return t=>async(r,n,o,i)=>{(await e.acquire())(),t(r,n,o,i)}}({mutex:h}),m=i({eth_newFilter:y(f(w)),eth_newBlockFilter:y(f(v)),eth_newPendingTransactionFilter:y(f(b)),eth_uninstallFilter:y(p(R)),eth_getFilterChanges:y(p(g)),eth_getFilterLogs:y(p(k))}),_=async({oldBlock:e,newBlock:t})=>{if(0===o.length)return;const r=await h.acquire();try{await Promise.all(d(o).map((async r=>{try{await r.update({oldBlock:e,newBlock:t})}catch(n){console.error(n)}})))}catch(n){console.error(n)}r()};return m.newLogFilter=w,m.newBlockFilter=v,m.newPendingTransactionFilter=b,m.uninstallFilter=R,m.getFilterChanges=g,m.getFilterLogs=k,m.destroy=()=>{!async function(){const e=d(o).length;o={},x({prevFilterCount:e,newFilterCount:0})}()},m;async function w(e){const r=new s({provider:t,params:e});await B(r);return r}async function v(){const e=new c({provider:t});await B(e);return e}async function b(){const e=new a({provider:t});await B(e);return e}async function g(e){const t=l(e),r=o[t];if(!r)throw new Error(`No filter for index "${t}"`);return r.getChangesAndClear()}async function k(e){const t=l(e),r=o[t];if(!r)throw new Error(`No filter for index "${t}"`);return"log"===r.type?results=r.getAllResults():results=[],results}async function R(e){const t=l(e),r=o[t],n=Boolean(r);return n&&await async function(e){const t=d(o).length;delete o[e];const r=d(o).length;x({prevFilterCount:t,newFilterCount:r})}(t),n}async function B(t){const n=d(o).length,i=await e.getLatestBlock();await t.initialize({currentBlock:i}),r++,o[r]=t,t.id=r,t.idHex=u(r);return x({prevFilterCount:n,newFilterCount:d(o).length}),r}function x({prevFilterCount:t,newFilterCount:r}){0===t&&r>0?e.on("sync",_):t>0&&0===r&&e.removeListener("sync",_)}}},81663:function(e,t,r){const n=r(75682),o=r(6417),i=r(23256),{bnToHex:s,hexToInt:c,incrementHexInt:a,minBlockRef:u,blockRefIsNumber:l}=r(98112);e.exports=class extends i{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new n(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map((e=>e.toLowerCase())))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),"earliest"===t&&(t="0x0"),this.params.fromBlock=t;const r=u(this.params.toBlock,e),n=Object.assign({},this.params,{toBlock:r}),o=await this._fetchLogs(n);this.addInitialResults(o)}async update({oldBlock:e,newBlock:t}){const r=t;let n;n=e?a(e):t;const o=Object.assign({},this.params,{fromBlock:n,toBlock:r}),i=(await this._fetchLogs(o)).filter((e=>this.matchLog(e)));this.addResults(i)}async _fetchLogs(e){return await o((t=>this.ethQuery.getLogs(e,t)))()}matchLog(e){if(c(this.params.fromBlock)>=c(e.blockNumber))return!1;if(l(this.params.toBlock)&&c(this.params.toBlock)<=c(e.blockNumber))return!1;const t=e.address&&e.address.toLowerCase();if(this.params.address&&t&&!this.params.address.includes(t))return!1;return this.params.topics.every(((t,r)=>{let n=e.topics[r];if(!n)return!1;n=n.toLowerCase();let o=Array.isArray(t)?t:[t];if(o.includes(null))return!0;o=o.map((e=>e.toLowerCase()));return o.includes(n)}))}}},72601:function(e){e.exports=function(e){return(t,r,n,o)=>{const i=e[t.method];return void 0===i?n():"function"===typeof i?i(t,r,n,o):(r.result=i,o())}}},73541:function(e,t,r){e.exports=r(72601)},6417:function(e){"use strict";const t=(e,t,r,n)=>function(...o){return new(0,t.promiseModule)(((i,s)=>{t.multiArgs?o.push(((...e)=>{t.errorFirst?e[0]?s(e):(e.shift(),i(e)):i(e)})):t.errorFirst?o.push(((e,t)=>{e?s(e):i(t)})):o.push(i);const c=this===r?n:this;Reflect.apply(e,c,o)}))},r=new WeakMap;e.exports=(e,n)=>{n={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...n};const o=typeof e;if(null===e||"object"!==o&&"function"!==o)throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===e?"null":o}\``);const i=new WeakMap,s=new Proxy(e,{apply(e,r,o){const c=i.get(e);if(c)return Reflect.apply(c,r,o);const a=n.excludeMain?e:t(e,n,s,e);return i.set(e,a),Reflect.apply(a,r,o)},get(e,o){const c=e[o];if(!((e,t)=>{let o=r.get(e);if(o||(o={},r.set(e,o)),t in o)return o[t];const i=e=>"string"===typeof e||"symbol"===typeof t?t===e:e.test(t),s=Reflect.getOwnPropertyDescriptor(e,t),c=void 0===s||s.writable||s.configurable,a=(n.include?n.include.some(i):!n.exclude.some(i))&&c;return o[t]=a,a})(e,o)||c===Function.prototype[o])return c;const a=i.get(c);if(a)return a;if("function"===typeof c){const r=t(c,n,s,e);return i.set(c,r),r}return c}});return s}},68961:function(e,t,r){const n=r(19394).default,o=r(73541),{createAsyncMiddleware:i}=r(88625),s=r(98406),{unsafeRandomBytes:c,incrementHexInt:a}=r(98112),u=r(40207);function l(e){return{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}e.exports=function({blockTracker:e,provider:t}){const r={},f=s({blockTracker:e,provider:t});let p=!1;const d=new n,h=o({eth_subscribe:i((async function(n,o){if(p)throw new Error("SubscriptionManager - attempting to use after destroying");const i=n.params[0],s=c(16);let d;switch(i){case"newHeads":d=h({subId:s});break;case"logs":const e=n.params[1];d=m({subId:s,filter:await f.newLogFilter(e)});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${i}"`)}return r[s]=d,void(o.result=s);function h({subId:r}){const n={type:i,destroy:async()=>{e.removeListener("sync",n.update)},update:async({oldBlock:e,newBlock:n})=>{const o=n,i=a(e);(await u({provider:t,fromBlock:i,toBlock:o})).map(l).forEach((e=>{y(r,e)}))}};return e.on("sync",n.update),n}function m({subId:e,filter:t}){t.on("update",(t=>y(e,t)));return{type:i,destroy:async()=>await f.uninstallFilter(t.idHex)}}})),eth_unsubscribe:i((async function(e,t){if(p)throw new Error("SubscriptionManager - attempting to use after destroying");const n=e.params[0],o=r[n];if(!o)return void(t.result=!1);delete r[n],await o.destroy(),t.result=!0}))});return h.destroy=function(){d.removeAllListeners();for(const e in r)r[e].destroy(),delete r[e];p=!0},{events:d,middleware:h};function y(e,t){d.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:e,result:t}})}}},25792:function(e,t,r){const n=r(76622),o=r(40207),{incrementHexInt:i}=r(98112);e.exports=class extends n{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const t=e,r=i(e),n=await o({provider:this.provider,fromBlock:r,toBlock:t}),s=[];for(const o of n)s.push(...o.transactions);this.addResults(s)}}},17398:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcEngine=void 0;const o=n(r(19394)),i=r(79826);class s extends o.default{constructor(){super(),this._middleware=[]}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!==typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,n)=>{try{const[o,i,c]=await s._runAllMiddleware(e,t,this._middleware);return i?(await s._runReturnHandlers(c),n(o)):r((async e=>{try{await s._runReturnHandlers(c)}catch(t){return e(t)}return e()}))}catch(o){return n(o)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(r){if(t)return t(r);throw r}}_promiseHandle(e){return new Promise((t=>{this._handle(e,((e,r)=>{t(r)}))}))}async _handle(e,t){if(!e||Array.isArray(e)||"object"!==typeof e){const r=new i.EthereumRpcError(i.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(r,{id:void 0,jsonrpc:"2.0",error:r})}if("string"!==typeof e.method){const r=new i.EthereumRpcError(i.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=Object.assign({},e),n={id:r.id,jsonrpc:r.jsonrpc};let o=null;try{await this._processRequest(r,n)}catch(s){o=s}return o&&(delete n.result,n.error||(n.error=i.serializeError(o))),t(o,n)}async _processRequest(e,t){const[r,n,o]=await s._runAllMiddleware(e,t,this._middleware);if(s._checkForCompletion(e,t,n),await s._runReturnHandlers(o),r)throw r}static async _runAllMiddleware(e,t,r){const n=[];let o=null,i=!1;for(const c of r)if([o,i]=await s._runMiddleware(e,t,c,n),i)break;return[o,i,n.reverse()]}static _runMiddleware(e,t,r,n){return new Promise((o=>{const s=e=>{const r=e||t.error;r&&(t.error=i.serializeError(r)),o([r,!0])},a=r=>{t.error?s(t.error):(r&&("function"!==typeof r&&s(new i.EthereumRpcError(i.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${c(e)}`,{request:e})),n.push(r)),o([null,!1]))};try{r(e,t,a,s)}catch(u){s(u)}}))}static async _runReturnHandlers(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new i.EthereumRpcError(i.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${c(e)}`,{request:e});if(!r)throw new i.EthereumRpcError(i.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${c(e)}`,{request:e})}}function c(e){return JSON.stringify(e,null,2)}t.JsonRpcEngine=s},31841:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAsyncMiddleware=void 0,t.createAsyncMiddleware=function(e){return async(t,r,n,o)=>{let i;const s=new Promise((e=>{i=e}));let c=null,a=!1;const u=async()=>{a=!0,n((e=>{c=e,i()})),await s};try{await e(t,r,u),a?(await s,c(null)):o(null)}catch(l){c?c(l):o(l)}}}},48508:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createScaffoldMiddleware=void 0,t.createScaffoldMiddleware=function(e){return(t,r,n,o)=>{const i=e[t.method];return void 0===i?n():"function"===typeof i?i(t,r,n,o):(r.result=i,o())}}},33107:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueId=void 0;const r=4294967295;let n=Math.floor(Math.random()*r);t.getUniqueId=function(){return n=(n+1)%r,n}},85086:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createIdRemapMiddleware=void 0;const n=r(33107);t.createIdRemapMiddleware=function(){return(e,t,r,o)=>{const i=e.id,s=n.getUniqueId();e.id=s,t.id=s,r((r=>{e.id=i,t.id=i,r()}))}}},88625:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(85086),t),o(r(31841),t),o(r(48508),t),o(r(33107),t),o(r(17398),t),o(r(79962),t)},79962:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeMiddleware=void 0;const n=r(17398);t.mergeMiddleware=function(e){const t=new n.JsonRpcEngine;return e.forEach((e=>t.push(e))),t.asMiddleware()}},12352:function(e){"use strict";const t=(e,t)=>function(){const r=t.promiseModule,n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];return new r(((r,o)=>{t.errorFirst?n.push((function(e,n){if(t.multiArgs){const t=new Array(arguments.length-1);for(let e=1;e<arguments.length;e++)t[e-1]=arguments[e];e?(t.unshift(e),o(t)):r(t)}else e?o(e):r(n)})):n.push((function(e){if(t.multiArgs){const e=new Array(arguments.length-1);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];r(e)}else r(e)})),e.apply(this,n)}))};e.exports=(e,r)=>{r=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},r);const n=e=>{const t=t=>"string"===typeof t?e===t:t.test(e);return r.include?r.include.some(t):!r.exclude.some(t)};let o;o="function"===typeof e?function(){return r.excludeMain?e.apply(this,arguments):t(e,r).apply(this,arguments)}:Object.create(Object.getPrototypeOf(e));for(const i in e){const s=e[i];o[i]="function"===typeof s&&n(i)?t(s,r):s}return o}},37253:function(e,t,r){const n=r(89539),o=r(17187);var i="object"===typeof Reflect?Reflect:null,s=i&&"function"===typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};function c(){o.call(this)}function a(e,t,r){try{s(e,t,r)}catch(n){setTimeout((()=>{throw n}))}}function u(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}e.exports=c,n.inherits(c,o),c.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var c=o[e];if(void 0===c)return!1;if("function"===typeof c)a(c,this,t);else{var l=c.length,f=u(c,l);for(r=0;r<l;++r)a(f[r],this,t)}return!0}}}]);